<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Let‚Äôs Elevate Your Garage!</title>
  
<style>
.send-button svg path {
  transition: transform 0.2s ease, fill 0.2s ease;
}
.send-button:hover svg path {
  transform: scale(1.2);
  fill: white;
}
</style>

<style>

.range-container {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  padding: 20px 24px;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 20px;
}

.range-slider {
  -webkit-appearance: none;
  width: 100%;
  height: 12px;
  border-radius: 6px;
  background: linear-gradient(90deg, #B91B21, #EB6000);
  position: relative;
  outline: none;
  transition: background 0.3s ease;
  box-shadow: 0 0 10px rgba(185,27,33,0.5);
}

.range-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  height: 30px;
  width: 30px;
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(4px);
  border-radius: 50%;
  border: 2px solid #fff;
  box-shadow: 0 0 10px rgba(0,0,0,0.25);
  margin-top: -9px;
  transition: transform 0.2s ease, background 0.2s ease;
}

.range-slider::-webkit-slider-thumb:hover {
  transform: scale(1.15);
  background: rgba(255,255,255,0.85);
}

.range-slider::-moz-range-thumb {
  height: 30px;
  width: 30px;
  background: rgba(255,255,255,0.6);
  border: 2px solid #fff;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(0,0,0,0.25);
}

.range-value {
  font-size: 18px;
  color: #ffffff;
  font-weight: 600;
  font-family: inherit;
  letter-spacing: 0.3px;
  text-shadow: 0 0 4px rgba(0,0,0,0.3);
}



.range-container {
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(8px);
  padding: 16px 20px;
  border-radius: 14px;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05), 0 2px 12px rgba(0,0,0,0.1);
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 16px;
}

.range-slider {
  -webkit-appearance: none;
  width: 100%;
  height: 6px;
  border-radius: 3px;
  background: rgba(255, 255, 255, 0.15);
  position: relative;
}

.range-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  height: 24px;
  width: 24px;
  background: #B91B21;
  border-radius: 50%;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
  transition: background 0.2s ease, transform 0.2s ease;
  position: relative;
  margin-top: -9px;
}

.range-slider::-webkit-slider-thumb:hover {
  transform: scale(1.15);
  background: #D9262F;
}

.range-slider::-moz-range-thumb {
  height: 24px;
  width: 24px;
  background: #B91B21;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

.range-value {
  font-size: 17px;
  color: white;
  font-weight: 500;
  font-family: inherit;
}



.range-container {
  background: rgba(255, 255, 255, 0.04);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  padding: 14px 20px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 12px;
}

.range-slider {
  -webkit-appearance: none;
  width: 100%;
  height: 10px;
  border-radius: 6px;
  background: linear-gradient(to right, #B91B21, #EB6000);
  outline: none;
  transition: background 0.3s ease;
  position: relative;
  margin: 10px 0;
}

.range-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 4px;
  height: 24px;
  background: white;
  border: none;
  border-radius: 2px;
  margin-top: -7px;
  box-shadow: 0 0 3px rgba(0,0,0,0.2);
  cursor: pointer;
}

.range-slider::-webkit-slider-thumb:hover {
  background: #f5f5f5;
}

.range-slider::-moz-range-thumb {
  width: 4px;
  height: 24px;
  background: white;
  border: none;
  border-radius: 2px;
  box-shadow: 0 0 3px rgba(0,0,0,0.2);
  cursor: pointer;
}

.range-value {
  font-size: 16px;
  color: white;
  font-weight: 500;
  font-family: inherit;
}



.range-container {
  background: rgba(255, 255, 255, 0.04);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  padding: 14px 20px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 12px;
}

.range-slider {
  -webkit-appearance: none;
  width: 100%;
  height: 10px;
  border-radius: 6px;
  background: linear-gradient(to right, #B91B21, #EB6000);
  outline: none;
  transition: background 0.3s ease;
  position: relative;
  margin: 10px 0;
}

.range-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 4px;
  height: 24px;
  background: white;
  border: none;
  border-radius: 2px;
  margin-top: -7px; /* centers 24px thumb on 10px track */
  box-shadow: 0 0 3px rgba(0,0,0,0.2);
  cursor: pointer;
}

.range-slider::-webkit-slider-thumb:hover {
  background: #f5f5f5;
}

.range-slider::-moz-range-thumb {
  width: 4px;
  height: 24px;
  background: white;
  border: none;
  border-radius: 2px;
  box-shadow: 0 0 3px rgba(0,0,0,0.2);
  cursor: pointer;
}

.range-value {
  font-size: 16px;
  color: white;
  font-weight: 500;
  font-family: inherit;
}



.range-slider {
  -webkit-appearance: none;
  width: 100%;
  height: 6px;
  border-radius: 4px;
  background: linear-gradient(to right, #B91B21, #EB6000);
  outline: none;
  margin-top: 6px;
}

.range-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: white;
  border: 2px solid #B91B21;
  cursor: pointer;
  box-shadow: 0 0 4px rgba(0,0,0,0.2);
  transition: transform 0.2s ease;
}

.range-slider::-webkit-slider-thumb:hover {
  transform: scale(1.2);
}

.range-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: white;
  border: 2px solid #B91B21;
  cursor: pointer;
  box-shadow: 0 0 4px rgba(0,0,0,0.2);
}


    html, body {
      margin: 0;
      padding: 0;
      width: 100vw;
      height: 680px;
      font-family: 'Segoe UI', sans-serif;
      background: transparent;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-sizing: border-box;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://assets.zyrosite.com/YNqPvxrOE7FXXPyr/see-through-logo-ALpeo5rB8WTewJPP.png') center center no-repeat;
      background-size: 75%;
      z-index: 0;
      pointer-events: none;
      opacity: 0.3;
      filter: contrast(1.2);
    }

    .header, .chat-box, form, #typing, #preview {
      position: relative;
      z-index: 1;
    }

    .header {
      text-align: center;
      margin-bottom: 0.15rem;
      padding-top: 1rem;
      position: relative;
    }

    .header h1 {
      margin: 0;
      font-size: 2.2rem;
      color: #B91B21;
      position: relative;
    }

    .header h1::before {
      content: "";
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      width: 480px;
      height: 100px;
      background: radial-gradient(circle, rgba(185,27,33,0.3) 0%, rgba(185,27,33,0) 80%);
      filter: blur(36px);
      z-index: -1;
      border-radius: 30px;
    }

    .header p {
        color: white !important;
          font-size: 1rem;
          position: relative;
          z-index: 2;
    }

    .chat-box {
      flex-grow: 1;
      width: 100%;
      max-width: 800px;
      min-height: 280px; max-height: 480px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      padding: 0.25rem;
      margin-bottom: 0.15rem;
    }

    .message {
      padding: 0.8rem 1rem;
      border-radius: 18px;
      margin-bottom: 0.6rem;
      max-width: 80%;
      line-height: 1.4;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }

    .bot {
      background: #fce7e7;
      color: #B91B21;
      align-self: flex-start;
    }

    .user {
      background: #eee;
      color: #333;
      align-self: flex-end;
    }

    .form-col {
      width: 100%;
      max-width: 800px;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-top: 0.5rem;
      margin-bottom: 0.15rem;
      padding: 0;
    }

    input[type="text"], input[type="file"] {
      padding: 0.7rem;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 100%;
      box-sizing: border-box;
    }

    button {
      padding: 0.7rem 1.2rem;
      background: #B91B21;
      border: none;
      color: white;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      align-self: center;
      width: 50%;
    }

    button:hover {
      background: #99171b;
    }

    #typing {
      font-style: italic;
      font-size: 0.9rem;
      color: #B91B21;
      margin-top: 0.5rem;
    }

    #preview {
      max-height: 90px;
      margin-top: 0.5rem;
    }
  
.chat-box {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none;  /* IE 10+ */
}
.chat-box::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}


input[type="date"] {
  padding: 10px 14px;
  font-size: 16px;
  font-family: inherit;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.05);
  color: white;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  outline: none;
  transition: all 0.2s ease;
}

input[type="date"]:hover {
  border-color: #B91B21;
}

input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(1);
}


input[type="range"] {
  -webkit-appearance: none;
  width: 100%;
  height: 6px;
  border-radius: 4px;
  background: #ccc;
  outline: none;
  transition: background 0.2s;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #B91B21;
  cursor: pointer;
  border: none;
  margin-top: -6px;
}

input[type="range"]::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #B91B21;
  cursor: pointer;
  border: none;
}

</style>

<style>
  .send-button:hover, .upload-button:hover {
    transform: scale(1.2);
    transition: transform 0.2s ease-in-out;
  }

.chat-box {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none;  /* IE 10+ */
}
.chat-box::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}


input[type="date"] {
  padding: 10px 14px;
  font-size: 16px;
  font-family: inherit;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.05);
  color: white;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  outline: none;
  transition: all 0.2s ease;
}

input[type="date"]:hover {
  border-color: #B91B21;
}

input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(1);
}


input[type="range"] {
  -webkit-appearance: none;
  width: 100%;
  height: 6px;
  border-radius: 4px;
  background: #ccc;
  outline: none;
  transition: background 0.2s;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #B91B21;
  cursor: pointer;
  border: none;
  margin-top: -6px;
}

input[type="range"]::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #B91B21;
  cursor: pointer;
  border: none;
}

</style>


<style>
button.ai-style-change-1 {
  width: 100px;
  height: 30px;
  padding: 5px;
  display: inline-block;
  position: absolute;
  top: 6px;
  right: 6px;
  font-size: 14px;
  line-height: 1;
  background: #B91B21;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  box-sizing: border-box;
}
</style>


<style>
.submit-button {
  background: linear-gradient(145deg, #B91B21, #a3171d);
  color: white;
  padding: 14px 32px;
  font-size: 16px;
  border: none;
  border-radius: 40px;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(185, 27, 33, 0.4);
  transition: all 0.25s ease-in-out;
  font-weight: 600;
  letter-spacing: 0.5px;
  margin: 20px auto 0 auto;
  margin-top: 20px;
}
.submit-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 24px rgba(185, 27, 33, 0.6);
  background: linear-gradient(145deg, #c8232b, #B91B21);
}
.submit-button:active {
  transform: scale(0.98);
  box-shadow: 0 2px 10px rgba(185, 27, 33, 0.3);
}
</style>

</head>
<body>
  <div class="header">
    <h1>Let‚Äôs Elevate Your Garage!</h1>
    <p>Your smart garage designer is standing by‚Äîlet‚Äôs build your vision together.</p>
  </div>

  <div class="chat-box" id="chat-box">
    <div class="message bot">üëã Hey there! Before we get started, I have a few quick questions to help design your perfect garage.</div>
  </div>

  <div id="typing" style="display:none;">Solomon is typing...</div>

  

<input accept="image/*" id="file-upload" style="display: none;" type="file"/>
<form id="chat-form" class="form-col" onsubmit="handleSubmit(event)">
  <div class="input-container" style="display: flex; align-items: center; gap: 6px; padding: 4px 6px; background: transparent; border-top: 1px solid #ccc; z-index: 10; position: sticky; bottom: 0; height: 40px;">
    
<label for="file-upload" class="upload-button" style="font-size: 28px; cursor: pointer; user-select: none; color: #B91B21;"><span style="color: white;">+</span></label>
<input accept="image/*,.pdf,.doc,.docx" id="file-upload" style="display: none;" type="file">
<input id="user-input" placeholder="Type your message..." style="flex: 1; padding: 10px; font-size: 16px; background: white; color: #111; border: 1px solid #ccc; border-radius: 8px; outline: none; flex: 1.2; width: 100%;" type="text" required/>
    <button class="send-button" type="submit" style="background: none; border: none; color: #B91B21; font-size: 13px; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; padding: 0; margin: 0; line-height: 1; cursor: pointer;">
<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-2xl">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.1918 8.90615C15.6381 8.45983 16.3618 8.45983 16.8081 8.90615L21.9509 14.049C22.3972 14.4953 22.3972 15.2189 21.9509 15.6652C21.5046 16.1116 20.781 16.1116 20.3347 15.6652L17.1428 12.4734V22.2857C17.1428 22.9169 16.6311 23.4286 15.9999 23.4286C15.3688 23.4286 14.8571 22.9169 14.8571 22.2857V12.4734L11.6652 15.6652C11.2189 16.1116 10.4953 16.1116 10.049 15.6652C9.60265 15.2189 9.60265 14.4953 10.049 14.049L15.1918 8.90615Z" fill="currentColor"></path>
</svg>
</button>
  </div>
</form>
<div id="previewContainer" style="display: none; margin: 12px;">
  <img id="preview" style="max-width: 100%; border-radius: 8px;" />
</div>


  
<script>
  const steps = [
    "What‚Äôs your full name?",
    "What‚Äôs the best email address to reach you at?",
    "And your phone number?",
    "What are your garage goals? (e.g. Workshop, Gym, Wellness Center, Car Storage)",
    "What features must your garage include? (e.g. Cabinets, Flooring, Sauna, etc.)",
    "What is your rough budget for this project?",
    "When would you ideally like to get started?",
    "A photo helps us visualize your goals ‚Äî upload one if you‚Äôd like!",
    "Any other ideas or must-haves you'd like to share?"
  ];

  const chatBox = document.getElementById("chat-box");
  const typing = document.getElementById("typing");
  const form = document.getElementById("chat-form");
  const input = document.getElementById("user-input");const skipButton = document.createElement("button");
skipButton.textContent = "‚úï";
skipButton.style.background = "transparent";
skipButton.style.border = "none";
skipButton.style.color = "#B91B21";
skipButton.style.fontSize = "18px";
skipButton.style.cursor = "pointer";
skipButton.style.marginLeft = "10px";

skipButton.onclick = () => {
  responses.push({ step: steps[stepIndex], answer: "Skipped photo upload" });
  stepIndex++;
  nextStep();
};

  const preview = document.getElementById("preview");

  let stepIndex = 0;
  let responses = [];

  function appendMessage(text, sender) {
    const msg = document.createElement("div");
    msg.className = `message ${sender}`;
    msg.textContent = text;
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  function nextStep() {
  if (stepIndex >= steps.length) {
    showSummary();
    return;
  }
    if (stepIndex < steps.length) {
      typing.style.display = "block";
      setTimeout(() => {
        appendMessage(steps[stepIndex], "bot");

    if (steps[stepIndex].toLowerCase().includes("photo")) {
      const uploadContainer = document.createElement("div");
      uploadContainer.style.display = "flex";
      uploadContainer.style.flexDirection = "column";
      uploadContainer.style.gap = "8px";
      uploadContainer.style.marginTop = "10px";
      chatBox.appendChild(uploadContainer);

      if (!chatBox.contains(skipButton)) {
        chatBox.appendChild(skipButton);
      }

      chatBox.scrollTop = chatBox.scrollHeight;
      return;
    }


    if (steps[stepIndex].toLowerCase().includes("photo")) {
      if (!chatBox.contains(skipButton)) {
        chatBox.appendChild(skipButton);
        chatBox.scrollTop = chatBox.scrollHeight;
      }
    } else {
      if (chatBox.contains(skipButton)) {
        chatBox.removeChild(skipButton);
      }
    }


    

    
    if (steps[stepIndex].toLowerCase().includes("like to get started")) {
      const calendarContainer = document.createElement("div");
      calendarContainer.style.display = "flex";
      calendarContainer.style.flexDirection = "column";
      calendarContainer.style.gap = "6px";
      calendarContainer.style.padding = "10px 0";

      const calendar = document.createElement("input");
      calendar.type = "date";
      calendar.style.fontSize = "16px";
      calendar.style.padding = "6px";

      const confirmButton = document.createElement("button");
      confirmButton.textContent = "Confirm Date";
      confirmButton.style.marginTop = "6px";
      confirmButton.style.padding = "6px 10px";
      confirmButton.style.cursor = "pointer";

      confirmButton.onclick = () => {
        responses.push({ step: steps[stepIndex], answer: calendar.value });
        stepIndex++;
        nextStep();
      };

      calendarContainer.appendChild(calendar);
      calendarContainer.appendChild(confirmButton);
      chatBox.appendChild(calendarContainer);
      chatBox.scrollTop = chatBox.scrollHeight;
      return;
    }


    if (steps[stepIndex].toLowerCase().includes("budget")) {
      const sliderContainer = document.createElement("div");
      sliderContainer.style.display = "flex";
      sliderContainer.style.flexDirection = "column";
      sliderContainer.style.gap = "6px";
      sliderContainer.style.padding = "10px 0";

      const slider = document.createElement("input");
      slider.type = "range";
      slider.className = "range-slider";
      slider.min = 5000;
      slider.max = 50000;
      slider.step = 100;
      slider.value = 20000;
      slider.style.width = "100%";

      const sliderLabel = document.createElement("div");
      sliderLabel.textContent = slider.value >= 50000 ? '$50,000+' : `$${Number(slider.value).toLocaleString()}`;
      sliderLabel.style.color = "white";

      slider.oninput = () => {
        sliderLabel.textContent = slider.value >= 50000 ? '$50,000+' : `$${Number(slider.value).toLocaleString()}`;
      };

      const confirmButton = document.createElement("button");
      confirmButton.textContent = "Confirm Budget";
      confirmButton.style.marginTop = "6px";
      confirmButton.onclick = () => {
        responses.push({ step: steps[stepIndex], answer: slider.value });
        stepIndex++;
        nextStep();
      };

      sliderContainer.appendChild(sliderLabel);
      sliderContainer.appendChild(slider);
      sliderContainer.appendChild(confirmButton);

      chatBox.appendChild(sliderContainer);
      chatBox.scrollTop = chatBox.scrollHeight;
      
    if (steps[stepIndex].toLowerCase().includes("like to get started")) {
      const calendarContainer = document.createElement("div");
      calendarContainer.style.display = "flex";
      calendarContainer.style.flexDirection = "column";
      calendarContainer.style.gap = "6px";
      calendarContainer.style.padding = "10px 0";

      const calendar = document.createElement("input");
      calendar.type = "date";
      calendar.style.fontSize = "16px";
      calendar.style.padding = "6px";

      const confirmButton = document.createElement("button");
      confirmButton.textContent = "Confirm Date";
      confirmButton.style.marginTop = "6px";
      confirmButton.onclick = () => {
        responses.push({ step: steps[stepIndex], answer: calendar.value });
        stepIndex++;
        nextStep();
      };

      calendarContainer.appendChild(calendar);
      calendarContainer.appendChild(confirmButton);
      chatBox.appendChild(calendarContainer);
      chatBox.scrollTop = chatBox.scrollHeight;
      return;
    }

      return;
    }

      if (steps[stepIndex].includes("Upload a photo")) {
        chatBox.appendChild(skipButton);
        chatBox.scrollTop = chatBox.scrollHeight;
      } else {
        if (chatBox.contains(skipButton)) chatBox.removeChild(skipButton);
      }
        typing.style.display = "none";
      }, 800);
    } else {
      appendMessage("üéâ Thank you! We‚Äôll use this information to begin planning your custom garage solution.", "bot");
    input.disabled = true;
    fileUpload.disabled = true;
    form.querySelector("button").disabled = true;

    const summaryBtn = document.createElement("button");
    summaryBtn.textContent = "üìã View Summary & Edit";
    summaryBtn.style.marginTop = "10px";
    summaryBtn.style.padding = "8px 14px";
    summaryBtn.style.backgroundColor = "#B91B21";
    summaryBtn.style.border = "none";
    summaryBtn.style.borderRadius = "8px";
    summaryBtn.style.color = "white";
    summaryBtn.style.cursor = "pointer";

    summaryBtn.onclick = () => {
      const summaryBubble = document.createElement("div");
      summaryBubble.classList.add("message", "bot");
      const summaryTitle = document.createElement("strong");
      summaryTitle.textContent = "üìã Here‚Äôs a summary of your answers:";
      summaryBubble.appendChild(summaryTitle);

      responses.forEach((r, i) => {
        const item = document.createElement("div");
        item.style.margin = "6px 0";

        const label = document.createElement("span");
        label.innerHTML = `<strong>${r.step}</strong><br>${r.answer}`;

        const editBtn = document.createElement("button");
        editBtn.textContent = "Edit";
        editBtn.style.marginLeft = "10px";
        editBtn.style.fontSize = "12px";
        editBtn.style.padding = "2px 6px";
        editBtn.style.cursor = "pointer";

        editBtn.onclick = () => {
          stepIndex = i;
          responses.splice(i, 1);
          summaryBubble.remove();
          summaryBtn.remove();
          input.disabled = false;
          fileUpload.disabled = false;
          form.querySelector("button").disabled = false;
          nextStep();
        };

        item.appendChild(label);
        item.appendChild(editBtn);
        summaryBubble.appendChild(item);
      });

      chatBox.appendChild(summaryBubble);
      chatBox.scrollTop = chatBox.scrollHeight;
    };

    chatBox.appendChild(summaryBtn);
    chatBox.scrollTop = chatBox.scrollHeight;
    return;
      input.disabled = true;
      fileUpload.disabled = true;
      form.querySelector("button").disabled = true;
    }
  }

  function handleSubmit(e) {
    e.preventDefault();
    const message = input.value.trim();
    if (!message) return;
    appendMessage(message, "user");
    responses.push({ step: steps[stepIndex], answer: message });
    input.value = "";
    stepIndex++;
    nextStep();
  }

  input.addEventListener("keypress", function(e) {
    if (e.key === "Enter") {
      e.preventDefault();
      form.requestSubmit();
    }
  });

  nextStep();

const fileUpload = document.getElementById("file-upload");
fileUpload.addEventListener("change", () => {
  const file = fileUpload.files[0];
  if (file && file.type.startsWith("image/")) {
    const reader = new FileReader();
    reader.onload = () => {
      preview.src = reader.result;
      preview.style.display = "block";
      appendMessage("üì∑ Perfect ‚Äî now we can better see how to elevate your space!", "user");
responses.push({ step: steps[stepIndex], answer: "File uploaded", image: reader.result });
stepIndex++;
nextStep();
    };
    reader.readAsDataURL(file);
  }
});



function showSummary() {
  const summaryWrapper = document.createElement("div");
  summaryWrapper.className = "message bot";
  summaryWrapper.style.whiteSpace = "pre-wrap";
  summaryWrapper.style.background = "rgba(255, 255, 255, 0.08)";
  summaryWrapper.style.border = "1px solid rgba(255, 255, 255, 0.1)";
  summaryWrapper.style.borderRadius = "10px";
  summaryWrapper.style.padding = "10px";
  summaryWrapper.style.marginTop = "10px";
  summaryWrapper.style.position = "relative";

  const heading = document.createElement("strong");
  heading.textContent = "Summary of your responses:";
  heading.style.display = "block";
  heading.style.marginBottom = "8px";
  summaryWrapper.appendChild(heading);

  const editBtn = document.createElement("button");
  editBtn.textContent = "Edit";
  editBtn.className = "ai-style-change-1";
  editBtn.style.cursor = "pointer";
  editBtn.style.position = "absolute";
  editBtn.style.top = "6px";
  editBtn.style.right = "6px";
  summaryWrapper.appendChild(editBtn);

  const list = document.createElement("ul");
  list.style.paddingLeft = "16px";
  list.style.marginTop = "8px";

  let isEditing = false;

  function renderList() {
    list.innerHTML = "";
    responses.forEach((entry, i) => {
      const li = document.createElement("li");
      const label = document.createElement("span");
      label.textContent = `${entry.step}: `;
      label.style.color = "#B91B21";
      li.appendChild(label);

      if (isEditing && entry.step.toLowerCase().includes("photo")) {
        if (entry.image) {
          const img = document.createElement("img");
          img.src = entry.image;
          img.style.width = "120px";
          img.style.borderRadius = "8px";
          img.style.marginTop = "6px";
          li.appendChild(document.createElement("br"));
          li.appendChild(img);
        }

        const changeBtn = document.createElement("button");
        changeBtn.textContent = entry.image ? "Change Photo" : "Add Photo";
        changeBtn.style.marginTop = "6px";
        changeBtn.style.fontSize = "12px";
        changeBtn.style.padding = "4px 8px";
        changeBtn.style.background = "#444";
        changeBtn.style.color = "white";
        changeBtn.style.border = "1px solid #999";
        changeBtn.style.borderRadius = "4px";
        changeBtn.style.cursor = "pointer";

        const fileInput = document.createElement("input");
        fileInput.type = "file";
        fileInput.accept = "image/*";
        fileInput.style.display = "none";

        changeBtn.onclick = () => fileInput.click();
        fileInput.onchange = () => {
          const file = fileInput.files[0];
          const reader = new FileReader();
          reader.onload = () => {
            entry.image = reader.result;
            renderList();
          };
          if (file) reader.readAsDataURL(file);
        };

        li.appendChild(document.createElement("br"));
        li.appendChild(changeBtn);
        li.appendChild(fileInput);

      } else if (isEditing) {
        const input = document.createElement("input");
        input.className = "editable"; input.style.color = "white";
        input.value = entry.answer;
        input.style.background = "#333";
        input.style.color = "white";
        input.style.border = "1px solid #888";
        input.style.padding = "4px";
        input.style.borderRadius = "4px";
        input.style.width = "100%";
        input.oninput = (e) => responses[i].answer = e.target.value;
        li.appendChild(input);
      } else {
        const span = document.createElement("span");
        span.textContent = entry.answer;
        span.style.color = "white";
        li.appendChild(span);

        if (entry.image) {
          const img = document.createElement("img");
          img.src = entry.image;
          img.style.width = "120px";
          img.style.borderRadius = "8px";
          img.style.marginTop = "6px";
          li.appendChild(document.createElement("br"));
          li.appendChild(img);
        }
      }

      list.appendChild(li);
    });
  }

  editBtn.addEventListener("click", () => {
    isEditing = !isEditing;
    editBtn.textContent = isEditing ? "Save" : "Edit";
    renderList();
  });

  renderList();
  summaryWrapper.appendChild(list);
  
  
  const submitContainer = document.createElement("div");
  submitContainer.style.width = "100%";
  submitContainer.style.display = "flex";
  submitContainer.style.justifyContent = "center";
  submitContainer.style.marginTop = "20px";

  const submitBtn = document.createElement("button");
  submitBtn.className = "submit-button";
  submitBtn.textContent = "Submit My Info";
  submitBtn.onclick = async () => {
    console.log("üì® Submit button clicked");
    submitBtn.textContent = "Submitting...";
    submitBtn.disabled = true;
    const formData = new FormData();
    console.log("üì® Submit button clicked");
    try {
      const response = await fetch("/submit", {
        method: "POST",
        body: formData
      });
      if (response.ok) {
        submitBtn.textContent = "‚úÖ Submitted!";
      } else {
        console.error("‚ùå Submission failed:", response.status);
        submitBtn.textContent = "‚ùå Submission Failed";
        submitBtn.disabled = false;
      }
    } catch (err) {
      console.error("‚ùå Fetch error:", err);
      submitBtn.textContent = "‚ùå Error Occurred";
      submitBtn.disabled = false;
    }

    if (response.ok) {
      submitBtn.textContent = "‚úÖ Submitted!";
    } else {
      submitBtn.textContent = "‚ùå Submission Failed";
      submitBtn.disabled = false;
    }
  };
  submitContainer.appendChild(submitBtn);
  summaryWrapper.appendChild(submitContainer);


  chatBox.appendChild(summaryWrapper);
  chatBox.scrollTop = chatBox.scrollHeight;
}


</script>


<script>
function isValidPhone(phone) {
  return /^\+?1?[\s.-]?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/.test(phone);
}

function isValidEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

document.addEventListener("DOMContentLoaded", function () {
  console.log("‚úÖ DOM fully loaded");
  const submitBtn = document.querySelector(".submit-button");
  if (submitBtn) {
    console.log("‚úÖ Submit button found and ready");
  } else {
    console.log("‚ùå Submit button not found");
  }
  const input = document.getElementById("user-input");
  const form = document.getElementById("chat-form");

  if (form) {
    form.addEventListener("submit", function (e) {
      e.preventDefault();
      handleSubmit(e);
    });
  }

  if (input) {
    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        e.preventDefault();
        const message = input.value.trim();
        const step = steps[stepIndex] || "";

        let error = document.getElementById("email-error");
        if (!error) {
          error = document.createElement("div");
          error.id = "email-error";
          error.style.color = "red";
          error.style.fontSize = "14px";
          error.style.marginTop = "4px";
          error.style.display = "none";
          input.insertAdjacentElement("afterend", error);
        }

        if (step.toLowerCase().includes("email")) {
          const valid = isValidEmail(message);
          if (!valid) {
            input.style.border = "2px solid red";
            error.style.display = "block";
            error.textContent = "Please enter a valid email address.";
            return;
          } else {
            input.style.border = "";
            error.style.display = "none";
          }
        }

        
        if (step.toLowerCase().includes("phone")) {
          const phoneValid = isValidPhone(message);
          let phoneError = document.getElementById("phone-error");
          if (!phoneError) {
            phoneError = document.createElement("div");
            phoneError.id = "phone-error";
            phoneError.style.color = "red";
            phoneError.style.fontSize = "14px";
            phoneError.style.marginTop = "4px";
            phoneError.style.display = "none";
            input.insertAdjacentElement("afterend", phoneError);
          }
          if (!phoneValid) {
            input.style.border = "2px solid red";
            phoneError.style.display = "block";
            phoneError.textContent = "Please enter a valid phone number.";
            return;
          } else {
            input.style.border = "";
            phoneError.style.display = "none";
          }
        }

        handleSubmit(e);
      }
    });
  }
});
</script>


<script>
document.addEventListener("DOMContentLoaded", function () {
  const observer = new MutationObserver(() => {
    const dateInput = document.querySelector('input[type="date"]');
    if (dateInput && !dateInput.hasAttribute("data-enhanced")) {
      dateInput.setAttribute("data-enhanced", "true");
      dateInput.addEventListener("change", function () {
        const message = dateInput.value;
        if (!message) return;
        appendMessage(message, "user");
        responses.push({ step: steps[stepIndex], answer: message });
        stepIndex++;
        nextStep();
      });
    }
  });

  observer.observe(document.body, { childList: true, subtree: true });
});
</script>

</body>
</html>

